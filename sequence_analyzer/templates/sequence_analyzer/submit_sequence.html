{% extends 'sequence_analyzer/base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title text-center mb-4">Submit Sequences</h2>
                <div class="alert alert-info">
                    <h5 class="alert-heading">Guidelines:</h5>
                    <ul class="mb-0">
                        <li>Submit sequences in <strong>FASTA format</strong></li>
                        <li>Each sequence must contain only valid amino acid letters (ACDEFGHIKLMNPQRSTVWY)</li>
                        <li>Maximum sequence length is 130 amino acids</li>
                        <li>You can submit up to <strong>10 sequences per day</strong></li>
                        <li>Each sequence should have a title starting with <code>&gt;</code></li>
                    </ul>
                </div>
                
                <div class="alert alert-light border">
                    <h6 class="alert-heading">FASTA Format Example:</h6>
                    <pre class="mb-0" style="font-size: 0.9em;"><code>&gt;sequence_1
ACDEFGHIKLMNPQRSTVWY
&gt;sequence_2
CDEFGHIKLMNPQRSTVWY
&gt;my_antibody_seq
ACDEFGHIKLMNPQRSTVWYACDEFG</code></pre>
                </div>

                <form method="post">
                    {% csrf_token %}
                    {{ form|crispy }}
                    <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
                        <button type="submit" class="btn btn-primary btn-lg px-4">Submit Sequences</button>
                        <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary btn-lg px-4">Cancel</a>
                    </div>
                </form>
                
                <div class="mt-4">
                    <h6>Daily Submission Status:</h6>
                    <div class="progress mb-2">
                        <div class="progress-bar" role="progressbar" style="width: {% widthratio today_submissions_count 10 100 %}%" 
                             aria-valuenow="{{ today_submissions_count }}" aria-valuemin="0" aria-valuemax="10">
                            {{ today_submissions_count }}/10
                        </div>
                    </div>
                    <small class="text-muted">You have {{ today_submissions_count }} sequences submitted today. {{ remaining_submissions }} remaining.</small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}